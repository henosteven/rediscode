## rpoplpush 的使用

> 这个命令非常有意思，在官网的文档中也有相应的描述，这里简要分析一个场景来说明一下

    假设我们现在需要使用redis来作为消息队列使用，我们常用的解决思路是生产者将任务push到
    list中，然后消费者对list执行pop操作，获任务进行处理。

    但是上面的思路中有个问题：如果list执行pop之后，消费者因为没有接到任务（出现网络抖动
    或者是消费者挂掉了等等），这时候这个任务就消失了，没有被处理，这个是不能忍受的。那怎
    么处理这个问题呢？

    很快我们想到，pop出来之后，放到一个消费队列里，待消费者处理完毕之后，在进行消除该任务
    的操作，貌似是靠谱的。但是pop出来，再放在processing list中，不是原子性的，所有这中间的
    一致性无法保证，所以这个也是不靠谱的。

    现在聊聊我们的rpoplpush source dest 这个操作执行两个操作，将source中元素取出，然后push
    到dest中，整个过程是原子性的。所以解决了上面我们的问题。

    还有一个比较有意思的操作，将source和dest设置为同一个list，会形成一个环形操作。

    总结：rpoplpush 还是很有用的，但是具体的坑还需要踩
